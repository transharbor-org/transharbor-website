<footer class="site-footer h-card">
  <data class="u-url" href="{{ "/" | relative_url }}"></data>

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p>{{ site.description | escape }}</p>
      </div>
      <div class="footer-col">
        <ul class="contact-list">
          <li><a href="{{ '/governance' | relative_url }}">Governance</a></li>
          <li><a href="{{ '/guidelines' | relative_url }}">Community Guidelines</a></li>
          <li><a href="{{ '/security' | relative_url }}">Security</a></li>
          <li><a href="{{ '/privacy' | relative_url }}">Privacy Policy</a></li>
          <li><a href="{{ '/terms' | relative_url }}">Terms of Service</a></li>
        </ul>
      </div>
    </div>

    <div class="social-links">
      {%- include social.html -%}
    </div>

  </div>

</footer>

<!-- Cookie Consent Banner -->
<div id="cookie-consent-banner" class="cookie-consent-banner" style="display: none;">
  <div class="cookie-consent-content">
    <p>We use analytics cookies to understand how you use our site and improve your experience. <a href="{{ '/privacy' | relative_url }}">Learn more</a></p>
    <div class="cookie-consent-buttons">
      <button id="cookie-accept" class="cookie-btn cookie-btn-accept">Accept</button>
      <button id="cookie-decline" class="cookie-btn cookie-btn-decline">Decline</button>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var consentBanner = document.getElementById('cookie-consent-banner');
    var acceptBtn = document.getElementById('cookie-accept');
    var declineBtn = document.getElementById('cookie-decline');
    
    if (!consentBanner || !acceptBtn || !declineBtn) {
      console.error('Cookie consent elements not found');
      return;
    }
    
    function getCookie(name) {
      var value = "; " + document.cookie;
      var parts = value.split("; " + name + "=");
      if (parts.length === 2) return parts.pop().split(";").shift();
    }
    
    function setCookie(name, value, days) {
      var expires = "";
      if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + value + expires + "; path=/; SameSite=Strict";
    }
    
    function showBanner() {
      consentBanner.style.display = 'block';
    }
    
    function hideBanner() {
      consentBanner.style.display = 'none';
    }
    
    var consent = getCookie('cookie-consent');
    if (!consent) {
      showBanner();
    } else if (consent === 'accepted' && typeof _paq !== 'undefined') {
      _paq.push(['rememberCookieConsentGiven']);
    }
    
    acceptBtn.addEventListener('click', function() {
      setCookie('cookie-consent', 'accepted', 365);
      if (typeof _paq !== 'undefined') {
        _paq.push(['rememberCookieConsentGiven']);
      }
      hideBanner();
    });
    
    declineBtn.addEventListener('click', function() {
      setCookie('cookie-consent', 'declined', 365);
      if (typeof _paq !== 'undefined') {
        _paq.push(['forgetCookieConsentGiven']);
      }
      hideBanner();
    });
  });
</script>
